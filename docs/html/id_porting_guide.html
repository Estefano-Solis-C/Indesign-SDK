<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/xhtml;charset=UTF-8" http-equiv="Content-Type" /><meta content="IE=9" http-equiv="X-UA-Compatible" /><meta content="Doxygen 1.8.3.1" name="generator" /><title>id_porting_guide</title><link href="tabs.css" rel="stylesheet" type="text/css" /><script src="jquery.js" type="text/javascript"></script><script src="dynsections.js" type="text/javascript"></script><link href="navtree.css" rel="stylesheet" type="text/css" /><script src="resize.js" type="text/javascript"></script><script src="navtree.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(initResizable);

  $(window).load(resizeHeight);

</script><link href="search/search.css" rel="stylesheet" type="text/css" /><script src="search/search.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(function() { searchBox.OnSelectItem(0); });

</script><link href="doxygen.css" rel="stylesheet" type="text/css" /></head><body><div id="top"><div id="titlearea"><table cellpadding="0" cellspacing="0"><tbody><tr style="height: 56px;"><td id="projectlogo"><img alt="Logo" src="adobe_logo.png" /></td><td style="padding-left: 0.5em;"><div id="projectname">InDesign SDK &nbsp;<span id="projectnumber">19.5</span></div></td></tr></tbody></table></div><script type="text/javascript">

var searchBox = new SearchBox("searchBox", "search",false,'Search');

</script><div class="tabs" id="navrow1"><ul class="tablist"><li><a href="index.html"><span>InDesign&nbsp;SDK</span></a><li class="current"><a href="pages.html"><span>Documentation</span></a><li><a href="group__bosses__parent.html"><span>Bosses</span></a><li><a href="group__sdk.html"><span>Sample&nbsp;plug-ins</span></a><li><a href="classes.html"><span>Class&nbsp;Index</span></a><li><div class="MSearchBoxInactive" id="MSearchBox"><span class="left"> <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png" /> <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search" /> </span><span class="right"> <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png" /></a> </span></div></ul></div></div><div class="ui-resizable side-nav-resizable" id="side-nav"><div id="nav-tree"><div id="nav-tree-contents"><div class="sync" id="nav-sync"></div></div></div><div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;"></div></div><script type="text/javascript">

$(document).ready(function(){initNavTree('id_porting_guide.html','');});

</script><div id="doc-content"><div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()"><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Pages</a></div><div id="MSearchResultsWindow"><iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)"></iframe></div><div class="header"><div class="headertitle"><div class="title">Porting Guide </div></div></div><div class="contents"><div class="textblock"><h1><a class="anchor" id="id_whats_new_in_the_indesign_cc_plugin_sdk"></a> What&#39;s New in the InDesign Plug-In SDK</h1><h2><a class="anchor" id="id_hfs_action_items_for_developers_and_partners"></a> HFS Action Items for Developers and Partners</h2><p>As you may be aware, HFS (Hierarchical File System) paths have been deprecated by Apple (since Mac OS 10.0-10.9). Considering this deprecation, InDesign would also move away from HFS and adopt POSIX style paths going forward. (Please refer to the subsection below for details on the differences between HFS and POSIX.)<p>For a smooth transitioning period and to support the backward compatibility of plugins, refer to the public APIs mentioned here: <a href="https://forums.adobeprerelease.com/indesigndev/discussion/407/hfs-action-items-for-developers-and-partners">https://forums.adobeprerelease.com/indesigndev/discussion/407/hfs-action-items-for-developers-and-partners</a><h3><a class="anchor" id="id_hfs_action_taken"></a> Action to be taken:</h3><p>Remove the use of any hard-coded path delimiter, such as &#39;:&#39;, &quot;:&quot;, or kTextChar_Colon, etc., as a path separator. Instead, query it from APIs exposed in the <a class="el" href="class_file_utils.html">FileUtils</a> class as per the need.<p>Kindly go through all hard coded file/folder paths in your code and let us know if these APIs would aid in the smooth working of your plugins with both HFS &amp; POSIX Path Style.<h3><a class="anchor" id="id_hfs_posix_comparison"></a> Quick comparison between HFS and POSIX</h3><table class="doxtable"><tr><th>HFS (Hierarchical File System) </th><th>POSIX (Portable Operating System Interface) </th></tr><tr><td>a. Developed by Apple </td><td>a. Open-source (IEEE Computer Society standard) </td></tr><tr><td>b. Uses colon(:) as a separator to separate paths </td><td>b. Uses forward slash (/) as a separator to separate paths </td></tr><tr><td>c. Case insensitive </td><td>c. Case sensitive </td></tr><tr><td>d. Absolute path doesn&#39;t start with separator </td><td>d. Absolute path starts with separator </td></tr><tr><td>e. Example: &quot;Macintosh HD:Users:Username:Documents:File.txt&quot; </td><td>e. Example: &quot;/home/user/Documents/file.txt&quot; </td></tr></table><p>InDesign is adopting POSIX Path Style as default with InDesign 19.4 release. Users and plug-in developers have the ability to switch between HFS and POSIX Style using the cookie manager as demonstrated below:<h3><a class="anchor" id="id_hfs_posix_switch"></a> How to Switch between HFS and POSIX Path Styles</h3><ol type="1"><li>Go to your app directory that contains InDesign.exe / Adobe InDesign&acirc;&#128;&macr;2024.app<li>Go to Resources directory.<li>Now check for a folder named Cookies. If not, create one.<li>Go to Cookies folder.<li>To enable POSIX Path Style, create a Cookie file with name &quot;ENABLE_POSIX_PATH&quot; (Please make sure you do not add any extension to this file).<li>To disable POSIX Path Style, delete the cookie file named &quot;ENABLE_POSIX_PATH&quot;.</ol><p><b>Note:</b> This ability will be present in future 19.x versions and subsequently removed in ID 20.0.<h2><a class="anchor" id="id_boost_upgrade"></a> Boost upgraded to version 1.74</h2><p>There are updates in our internal platform components. As part of this, we have upgraded the boost from 1.72 to 1.74. This boost upgrade has breaking changes. To review the changes across different boost versions, please refer to the following boost release notes:<ul><li><a href="https://www.boost.org/users/history/version_1_73_0.html">https://www.boost.org/users/history/version_1_73_0.html</a><li><a href="https://www.boost.org/users/history/version_1_74_0.html">https://www.boost.org/users/history/version_1_74_0.html</a> If any of your plugins use Boost bundled with InDesign, please refer to the above documentation.</ul><h2><a class="anchor" id="id_xcode_deployment_target"></a> Xcode base SDK and deployment target</h2><p>InDesign now uses MacOSX11.x.sdk as the Base SDK, OSX 11.x as the OS X Deployment Target, GNU C++-14 as the C++ Language Dialect, and libc++.dylib as the C++ Standard Library for Xcode projects. If your projects don&#39;t use the SDK shared Xcode setting files, you will need to update these settings manually.<p><b>Other project changes to note</b><ol type="1"><li>In common.xcconfig, CLANG_CXX_LANGUAGE_STANDARD has been set to gnu++14 i.e., the code is compiled as GNU C++-14 compliant.<li>BOOST_SPIRIT_THREADSAFE has been defined centrally in common.xcconfig.<li>ALWAYS_SEARCH_USER_PATHS has been set to NO in common.xcconfig. You may need to change #include statements that were using user search path files but with syntax &quot;#include &lt;some-file&gt;&quot; and replace them with syntax &quot;#include &quot;&lt;some-header-file&gt;&quot;&quot;. This change is being done proactively as the setting ALWAYS_SEARCH_USER_PATHS is deprecated in future versions of Xcode.<li>When you open SDK-plugins in Xcode 14.2, you might get the warning &quot;Update to recommended settings&quot;. Either you can simply ignore this warning, or if you want to fix this, follow the below steps - a. Click on &quot;Update to recommended settings&quot; -&gt; Click on &quot;Perform Changes&quot;. b. Go to project Build Settings -&gt; Apple Clang - Warnings - All languages -&gt; Set &quot;Implicit Conversion to 32 Bit Type&quot; to No.</ol><h2><a class="anchor" id="id_system_requirements"></a> System Requirements</h2><ul><li>For Windows development, Windows 7 SP1 is the minimum requirement.<li>For Mac x86_64 development, Mac OS 12.5.1 or later is now required (Xcode 14.2 requires this).<li>For Mac arm64 development, Mac OS 12.5.1 or later is now required (Xcode 14.2 requires this).</ul><h2><a class="anchor" id="id_ide_requirements"></a> IDE Requirements</h2><h3><a class="anchor" id="vs_2022"></a> Visual Studio version is Visual Studio 2022 (v17.1.6).</h3><p>When installing Visual Studio 2022, please ensure that Windows SDK 10.0.20348.0 is also installed as this is used as the base SDK for InDesign projects. Also, please add a system environment variable called VS2022INSTALLDIR and set it to the path of the VS 2022 installation folder, upto the parent folder of folders &quot;Common7&quot;, &quot;VC&quot; etc. For example, if you installed Visual Studio 2022 Enterprise edition, the value of VS2022INSTALLDIR should be C:\Program Files (x86\Microsoft Visual Studio\2022\Enterprise.<p>To update an existing Visual Studio project, the simplest method is to open the project in Visual Studio 2022 and use the prompt to update the project. In this window, please modify Windows SDK Version to 10.0.20348.0 and Platform Toolset to v143.<p>Alternatively you can modify the project file in a text editor by changing the ToolsVersion to 17.1.6 and PlatformToolset version to v143 and adding a new entry WindowsTargetPlatformVersion as 10.0.20348.0, as shown below.<div class="fragment"><div class="line">&lt;Project DefaultTargets=<span class="stringliteral">&quot;Build&quot;</span> ToolsVersion=<span class="stringliteral">&quot;17.1.6&quot;</span> xmlns=<span class="stringliteral">&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;</span>&gt;</div></div><div class="fragment"><div class="line"> &lt;PropertyGroup Label=<span class="stringliteral">&quot;Globals&quot;</span>&gt;</div><div class="line"> &lt;WindowsTargetPlatformVersion&gt;10.0.20348.0&lt;/WindowsTargetPlatformVersion&gt;</div><div class="line">&lt;/PropertyGroup&gt;</div></div><div class="fragment"><div class="line">&lt;PropertyGroup Condition=<span class="stringliteral">&quot;&#39;$(Configuration)|$(Platform)&#39;==&#39;Release|x64&#39;&quot;</span> Label=<span class="stringliteral">&quot;Configuration&quot;</span>&gt;</div><div class="line"> &lt;ConfigurationType&gt;DynamicLibrary&lt;/ConfigurationType&gt;</div><div class="line"> &lt;PlatformToolset&gt;v143&lt;/PlatformToolset&gt;</div><div class="line">&lt;/PropertyGroup&gt;</div><div class="line">&lt;PropertyGroup Condition=<span class="stringliteral">&quot;&#39;$(Configuration)|$(Platform)&#39;==&#39;Debug|x64&#39;&quot;</span> Label=<span class="stringliteral">&quot;Configuration&quot;</span>&gt;</div><div class="line"> &lt;ConfigurationType&gt;DynamicLibrary&lt;/ConfigurationType&gt;</div><div class="line"> &lt;PlatformToolset&gt;v143&lt;/PlatformToolset&gt;</div><div class="line">&lt;/PropertyGroup&gt;</div></div><p>Dolly has been updated to generate new projects with these settings.<p><b>Other project changes to note</b><ol type="1"><li>In previous releases, all projects inherited a setting /Zc:sizedDealloc- from Base.props. This setting has now been removed.<li>In Base.props, LanguageStandard has been set to stdcpp14 i.e. the code is compiled as C++-14 compliant.<li>BOOST_SPIRIT_THREADSAFE has been defined centrally in Base.props.</ol><p><b>IntelliSense</b><p>IntelliSense has never worked very well for InDesign code, and you may find that IntelliSense red squiggles appear under nearly every InDesign type or API, despite your project compiling successfully.<p>To disable the squiggles:<ol type="1"><li>Go to Tools &gt; Options.<li>In the options dialog, in the left pane, expand &quot;Text Editor&quot; and then expand &quot;C/C++&quot;.<li>Click on &quot;Advanced&quot; under &quot;C/C++&quot;.<li>In the right pane, scroll down until you see the &quot;IntelliSense&quot; section.<li>Select &quot;Disable Squiggles&quot; and change its value to True.<li>Click OK.</ol><h2><a class="anchor" id="id_std_auto_ptr"></a> std::auto_ptr removal</h2><p>With InDesign 17.0 SDK, in an effort to move away from std::auto_ptr and adapt higher C++ standards (i.e. C++17), we have removed std::auto_ptr usage from InDesign.<p>The new SDK and shared samples will expect you to use indesign::autoptr instead of std::auto_ptr.<p>Here are a few reasons for this.<ol type="1"><li>This is a drop-in replacement over older auto_ptr so should not cause any runtime changes.<li>The implementation is aliased to std::shared_ptr. This allows us to do another iteration in future with certainty that complete cleanup of autoptr will not cause runtime issues.<li>It is easier to adopt in a larger codebase without manual efforts in short term.</ol><p>While doing this change, we have kept in mind that the interface signatures do not change unless change gets us closer to the goal of getting rid of autoptr constructs eventually. This implies that at a few places you may have to directly replae std::auto_ptr with std::unique_ptr or std::shared_ptr. This would be directly available in the API headers as to what is the altername of the std::auto_ptr in new SDK.<p>If you are not able to find the definition of indesign::autoptr, the header file containing this should be in /source/public/includes/... Calling out a few things explicitly:<ol type="1"><li>No, we are not moving to C++17 (yet.) If that is going to happen, We will post that information to you as soon as we can.<li>Yes, we have just aliased the indesign::autoptr to std::shared_ptr.</ol><h2><a class="anchor" id="id_new_apis"></a> API changes</h2><p>For a full list of API changes see the <a class="el" href="api_diffs.html">API Changes</a> page.<h1><a class="anchor" id="id_modernize_containers"></a> Multi-cycle effort to modernize InDesign native containers (since InDesign CC 2018)</h1><p>While InDesign code base is built using C++-11 now, the code does not fully leverage modern STL containers and therefore loses out on newer features introduced in C++-11. We intend to modernize our containers over multiple cycles to be able to leverage these features.<p>The approach to modernization would be to ideally replace our containers with corresponding STL containers. For example, over time, <a class="el" href="class_k2_vector.html">K2Vector</a> should be replaced by std::vector.<p>To facilitate the eventual <a class="el" href="class_k2_vector.html">K2Vector</a> migration, following changes would be made to the <a class="el" href="class_k2_vector.html">K2Vector</a> interface in InDesign CC 2018:<h2><a class="anchor" id="id_k2vector_non_std_constructor"></a> K2Vector non-standard constructor removal</h2><p><a class="el" href="class_k2_vector.html">K2Vector</a> has a non-standard explicit constructor which takes &#39;size_type n&#39; as parameter and reserves capacity for &#39;n&#39; elements, but does not construct any elements so its size remains zero. STL&#39;s std::vector has a constructor with similar signature but actually constructs &#39;n&#39; elements thereby resulting in a vector of size &#39;n&#39;. Replacing <a class="el" href="class_k2_vector.html">K2Vector</a> with std::vector without addressing this constructor would result in potential breaks in code that is using this <a class="el" href="class_k2_vector.html">K2Vector</a> constructor. Therefore we intend to remove this constructor in InDesign CC 2018, so that existing code can be ported before the switch from <a class="el" href="class_k2_vector.html">K2Vector</a> to std::vector happens. Code that uses this constructor can be ported as follows:<p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> var(10);</div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> var;</div><div class="line">var.reserve(10);</div></div><h2><a class="anchor" id="id_k2vector_location_api"></a> K2Vector deprecated API &quot;Location&quot; removal</h2><p><a class="el" href="class_k2_vector.html">K2Vector</a>&#39;s Location API has been marked deprecated for several cycles now. This API returns a value of type &#39;int32&#39;. If the element being searched for is found in the <a class="el" href="class_k2_vector.html">K2Vector</a>, then the return value is the index at which this value was found. Otherwise, the returned value is -1. Since std::vector interface does not contain this API, we need to remove this API altogether to facilitate switching to std::vector in future.<p>There are several different ways in which code currently using Location can be ported:<ul><li>Often Location API is used to check if a particular element exists or does not exist in the <a class="el" href="class_k2_vector.html">K2Vector</a>. Replacement functions K2found and K2notfound, defined in <a class="el" href="_k2_s_t_l_utilities_8h_source.html">K2STLUtilities.h</a>, can be used as replacement. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0);</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Location(testVal) == -1){} <span class="comment">//not found</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Location(testVal) &lt; 0){} <span class="comment">//not found</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Location(testVal) &gt;= 0){} <span class="comment">//found</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Location(testVal) != -1){} <span class="comment">//found</span></div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0);</div><div class="line"><span class="keywordflow">if</span> (K2notfound(myK2Vector, testVal)){} <span class="comment">//not found</span></div><div class="line"><span class="keywordflow">if</span> (K2found(myK2Vector, testVal)){} <span class="comment">//found</span></div></div><ul><li>If you want to perform an operation on the returned value or remove it from the <a class="el" href="class_k2_vector.html">K2Vector</a>, consider using iterators directly. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0), newVal(1);</div><div class="line">int32 loc = myK2Vector.Location(testVal);</div><div class="line"><span class="keywordflow">if</span> (loc != -1) <span class="comment">//found</span></div><div class="line">{</div><div class="line"> myK2Vector[loc] = newVal; <span class="comment">//change the value, or remove it as in next statement...</span></div><div class="line"> myK2Vector.erase(myK2Vector.begin() + loc);</div><div class="line">}</div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0), newVal(1);</div><div class="line"><span class="keyword">auto</span> iter = K2find(myK2Vector, testVal);</div><div class="line"><span class="keywordflow">if</span> (iter != myK2Vector.end()) <span class="comment">//found</span></div><div class="line">{</div><div class="line"> *iter = newVal; <span class="comment">//change the value, or remove it as in next statement...</span></div><div class="line"> myK2Vector.erase(iter);</div><div class="line">}</div></div><ul><li>If you do need the int32 value that used to be returned by Location API, because you need to store it or pass it to another API, replacement function K2location, defined in <a class="el" href="_k2_s_t_l_utilities_8h_source.html">K2STLUtilities.h</a>, can still be used. K2location will be removed or will undergo change in signature in future when we clean up code where int32 is used where size_type was intended. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0);</div><div class="line"><span class="keywordflow">return</span> myK2Vector.Location(testVal);</div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line">T testVal(0);</div><div class="line"><span class="keywordflow">return</span> K2location(myK2Vector, testVal);</div></div><h2><a class="anchor" id="id_k2vector_length_api"></a> K2Vector deprecated API &quot;Length&quot; removal</h2><p><a class="el" href="class_k2_vector.html">K2Vector</a>&#39;s Length API has been marked deprecated for several cycles now. This API returns a value of type &#39;int32&#39; representing the number of elements in the <a class="el" href="class_k2_vector.html">K2Vector</a>. Standard API &quot;size&quot; already exists in the <a class="el" href="class_k2_vector.html">K2Vector</a> interface and can be used in many situations - read the porting examples below where special care needs to be taken when replacing Length with size:<ul><li>Often Length API is used to check if a <a class="el" href="class_k2_vector.html">K2Vector</a> is empty or non-empty. <a class="el" href="class_k2_vector.html">K2Vector</a> API &quot;empty&quot; can be used as a replacement for this use case. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length() == 0){} <span class="comment">//empty</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length() != 0){} <span class="comment">//non-empty</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length() &gt; 0){} <span class="comment">//non-empty</span></div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length()){} <span class="comment">//non-empty</span></div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.empty()){} <span class="comment">//empty</span></div><div class="line"><span class="keywordflow">if</span> (!myK2Vector.empty()){} <span class="comment">//non-empty</span></div></div><ul><li>Sometimes the Length() API is actually used as a for loop condition to iterate over the entire <a class="el" href="class_k2_vector.html">K2Vector</a>. Iterators, reverse iterators and range-based for loops can be used as a replacement. Examples:</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (int32 i = 0; i &lt; myK2Vector.Length(); ++i) <span class="comment">//forward iteration of entire K2Vector</span></div><div class="line">{ <span class="keyword">const</span> T &amp;val = myK2Vector[i]; }</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (int32 i = myK2Vector.Length() - 1; i &gt;= 0 ; --i) <span class="comment">//reverse iteration of entire K2Vector</span></div><div class="line">{ <span class="keyword">const</span> T &amp;val = myK2Vector[i]; }</div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector;</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = myK2Vector.begin(); iter != myK2Vector.end(); ++iter) <span class="comment">//forward iteration of entire K2Vector</span></div><div class="line">{ <span class="keyword">const</span> T &amp;val = *iter; }</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;val : myK2Vector) <span class="comment">//forward iteration of entire K2Vector using range-based for loop</span></div><div class="line">{ }</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = myK2Vector.rbegin(); iter != myK2Vector.rend(); ++iter) <span class="comment">//reverse iteration of entire K2Vector</span></div><div class="line">{ <span class="keyword">const</span> T &amp;val = *iter; }</div></div><ul><li>If the actual size is needed, use either K2Vector::size() or K2length API that is defined in K2STLUtilities. API &quot;size&quot; should be used when you know it is safe to use the unsigned return value of size API in place of the signed return value of the Length API. If a signed return value is needed, use K2length instead (see example below). K2length will be removed in future when we clean up code where int32 is used where size_type was intended.</ul><p>Current code (assuming a typename T): <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector, mySecondK2Vector;</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.Length() == mySecondK2Vector.Length()){} <span class="comment">//safe to use size()</span></div><div class="line">int32 index = -1;</div><div class="line">int32 prevSize = myK2Vector.Length(); <span class="comment">//might be safe to use size() - depends on whether the value is compared with an existing int32 or not.</span></div><div class="line"><span class="keywordflow">if</span> (index &lt; myK2Vector.Length()){} <span class="comment">//NOT safe to use size() because the value of int32, -1, will be converted to unsigned and will be greater than the size of the K2Vector.</span></div></div><p>New code: <div class="fragment"><div class="line"><a class="code" href="class_k2_vector.html">K2Vector&lt;T&gt;</a> myK2Vector, mySecondK2Vector;</div><div class="line"><span class="keywordflow">if</span> (myK2Vector.size() == mySecondK2Vector.size()){} <span class="comment">//safe to use size()</span></div><div class="line">int32 index = -1;</div><div class="line">int32 prevSize = myK2Vector.size(); <span class="comment">//might be safe to use size() - depends on whether the value is compared with an existing int32 or not.</span></div><div class="line"><span class="keywordflow">if</span> (index &lt; K2length(myK2Vector)){} <span class="comment">//NOT safe to use size() because the value of int32, -1, will be converted to unsigned and will be greater than the size of the K2Vector.</span></div></div><h3><a class="anchor" id="id_svg_icons"></a> SVG Icons</h3><p>Icons and cursors can be created in their native-platform resource form. InDesign also supports SVG/PNG platform-independent files for icons. SVG is the preferred resource type to use in icon-based widgets. All the application tools icons and cursors use SVG files. Although PNG icons are still supported,&Acirc;&nbsp;continuing to use PNG Icons means that icons will become skewed and blurred when the icons are scaled. Instead of PNG icons, SVG icons should be preferred.<p>To create a SVG-based icon:<ol type="1"><li>In your .fr file, where you have the ToolDef, declare the SVG resources. There will be only one state for each each icon i.e. normal. For example, in the SDK snippet runner plugin we have declared SVG resource as: <div class="fragment"><div class="line">resource SVGA(kSnipRunGoIconSnapResourceID) <span class="stringliteral">&quot;S_Play_Wi_N@2x.svg&quot;</span></div></div><li>Use the normal-state resource ID in your ToolDef definition, where you specify the icon ID for the tool.</ol><h1><a class="anchor" id="id_spectrum_ui_in_indesign"></a> Spectrum UI in InDesign (since InDesign CC 2017.1)</h1><p>The overall theme of Spectrum UI is to bring a consistency in Adobe products&acirc;&#128;&#153; UI and give these products a flat modern look. The major effort in this work is to remove bevels and embossing in the UI.<h2><a class="anchor" id="id_spectrum_plugin_changes"></a> Changes needed to get Spectrum UI in plug-ins</h2><p>Ideally, no changes should be needed. API signatures have not been modified in this UI modernization so existing plug-ins should automatically get UI appearance consistent to InDesign, if no custom drawing has been done for any widget i.e. following API has not been implemented:<div class="fragment"><div class="line"><a class="code" href="class_i_control_view.html#aec14fd20f70d44b1b43df9c47458ce24">IControlView::Draw</a>(<a class="code" href="class_i_view_port.html">IViewPort</a>* viewPort, SysRgn updateRgn = nil)</div></div><p>or following API has not been overridden:<div class="fragment"><div class="line"><a class="code" href="class_d_v_hosted_widget_view.html">DVHostedWidgetView</a>::(dvaui::drawbot::Drawbot* drawbotP)</div></div><p>If custom drawing has been done using any of the above APIs, some rework may be needed depending on the type of customization done. An example of customization that was done by InDesign team was bevels. Bevel is a combination of highlight and shadow. We chose to replace it with a uniform border wherever it appeared. Another major change that we made was changing few icons as they did not have a flat appearance. This is an optional change for plug-in developers. If the currently used icons look inconsistent with the rest of the UI, they may be modified to match colors and flatter appearance. In such a situation, the plug-in will need recompilation.<h2><a class="anchor" id="id_spectrum_api_behavior_changes"></a> Changes in API behavior</h2><ul><li>Owner drawn dropdowns: The width of the owner drawn dropdowns has been limited to a minimum value of kCC2016OwnerDrawDDItemMinWidth and maximum kCC2016OwnerDrawDDItemMaxWidth. These constants and other useful constants have been defined in <a class="el" href="_std_height_width_constants_8h_source.html">StdHeightWidthConstants.h</a> header file.</ul><ul><li>SetDrawListWidgetEndLine() API: The drawing of end line has been disabled from the scroller widget and SetDrawListWidgetEndLine() API has been marked deprecated. Drawing of end line via scroller widget in the list tree is not required as it is already being done while drawing the node separator for the last node. Users can set/reset the drawing of endline via the &acirc;&#128;&#156;kDrawEndLine&acirc;&#128;&#157; attribute in the &acirc;&#128;&#156;fr&acirc;&#128;&#157; as while drawing node separator &acirc;&#128;&#156;kDrawEndLine&acirc;&#128;&#157; attribute is queried and decision to draw the endline is made on the basis of its value.</ul><ul><li>Widgets added for Spectrum in Widgets.fh</ul><ol type="1"><li>GenericPanelWithCustomBorderWidget: This widget is defined to have a configurable sides which should be drawn around the child widget. This is an extension to GenericPanelWithBorderWidget with additional information for sides to be drawn and the corner radius, if it is going to have rounded corners.</ol><p>Parameters for GenericPanelWithCustomBorderWidget : Other than the parameters used by GenericPanelWithBorderWidget, the following parameters are needed:<ul><li>The sides to be drawn: The constants kAllBorder, kLeftBorder, kRightBorder, kTopBorder, kBottomBorder are defined in <a class="el" href="_std_height_width_constants_8h_source.html">StdHeightWidthConstants.h</a> . If you have specified a corner radius to be used which is greater than 0, the border will be drawn with the specified sides and the corners made by those edges will have the corner radius specified.<li>The corner radius: Use the corner radius if you want the corners to be rounded. If the corner radius specified is less than or equal to 0, the corners will not be rounded.</ul><ol type="1"><li>CSliderWidget: This can be used to create slider like widgets. The following parameters are read from the fr file:</ol><ul><li>CControlView: The <a class="el" href="class_i_control_view.html">IControlView</a> description of the slider.<li>CSliderControlData: The minimum, maximum, and initial value of the slider. These values should be specified as double e.g. 0.0, 100.0, 50.0 will set the minimum, maximum, and initial value of the slider.<li>CSliderTickCount: The number of ticks to show on the slider. Generally, the minimum and maximum slider values are divided into equal parts to get the numbers of ticks. If number of ticks specified &lt; 2, it will be ignored to have no ticks.</ul><p>Any change in the value of the slider value is broadcast on <a class="el" href="class_i_subject.html">ISubject</a> interface of this widget with ClassID as kRealChangeStateMessage. </div></div></div><div class="navpath" id="nav-path"><ul><li class="footer">Generated on Thu Jul 4 2024 05:21:54 for InDesign SDK by <a href="http://www.doxygen.org/index.html"> <img alt="doxygen" class="footer" src="doxygen.png" /></a> 1.8.3.1 </ul></div></body></html>
